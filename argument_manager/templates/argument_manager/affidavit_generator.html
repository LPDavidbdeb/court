{% extends 'base.html' %}
{% load static %}

{% block title %}Générateur d'Affidavit: {{ narrative.titre }}{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="card">
        <div class="card-header bg-primary text-white">
            <h1 class="h3 mb-0">Affidavit pour la Trame Narrative: "{{ narrative.titre }}"</h1>
        </div>
        <div class="card-body">

            {% for argument in arguments %}
                <div class="legal-block mb-5">
                    <h3>{{ argument.title }}</h3>
                    
                    <div class="section-declaration">
                        <h4>1. Déclaration faite sous serment :</h4>
                        <div class="content">
                            {{ argument.text_declaration|safe }}
                            
                            <ul>
                            {% for lie in argument.targeted_statements.all %}
                                <li class="text-danger">"{{ lie.text }}" ({{ lie.document.title }})</li>
                            {% endfor %}
                            </ul>
                        </div>
                    </div>

                    <div class="section-proof">
                        <h4>2. Preuve de la fausseté de la déclaration :</h4>
                        <div class="content">
                            {{ argument.text_proof|safe }}
                        </div>
                    </div>

                    <div class="section-mens-rea">
                        <h4>3. Connaissance de la fausseté (Mens Rea) :</h4>
                        <div class="content">
                            {{ argument.text_mens_rea|safe }}
                        </div>
                    </div>

                    <div class="section-intent">
                        <h4>4. Intention de tromper le tribunal :</h4>
                        <div class="content">
                            {{ argument.text_intent|safe }}
                        </div>
                    </div>
                </div>
                <hr class="legal-separator">
            {% endfor %}

        </div>
    </div>
</div>
{% endblock %}
